<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Actions Reference - MIDIMon Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Transform MIDI controllers into advanced macro pads with RGB feedback and timing-based triggers">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MIDIMon Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/amiable-dev/midimon" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/amiable-dev/midimon/edit/main/docs-site/src/src/configuration/actions.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="actions-reference"><a class="header" href="#actions-reference">Actions Reference</a></h1>
<p>Actions define what happens when a trigger condition is met. MIDIMon supports a rich set of action types that can be composed in powerful ways.</p>
<h2 id="quick-reference"><a class="header" href="#quick-reference">Quick Reference</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Action Type</th><th>Description</th><th>Complexity</th></tr></thead><tbody>
<tr><td><a href="#keystroke">Keystroke</a></td><td>Send keyboard shortcuts</td><td>Simple</td></tr>
<tr><td><a href="#text">Text</a></td><td>Type text strings</td><td>Simple</td></tr>
<tr><td><a href="#launch">Launch</a></td><td>Open applications</td><td>Simple</td></tr>
<tr><td><a href="#shell">Shell</a></td><td>Execute shell commands</td><td>Simple</td></tr>
<tr><td><a href="#sequence">Sequence</a></td><td>Chain multiple actions</td><td>Moderate</td></tr>
<tr><td><a href="#delay">Delay</a></td><td>Add timing control</td><td>Simple</td></tr>
<tr><td><a href="#mouseclick">MouseClick</a></td><td>Simulate mouse clicks</td><td>Simple</td></tr>
<tr><td><a href="#repeat">Repeat</a></td><td>Repeat actions N times</td><td>Moderate</td></tr>
<tr><td><a href="#volumecontrol">VolumeControl</a></td><td>System volume control</td><td>Simple</td></tr>
<tr><td><a href="#modechange">ModeChange</a></td><td>Switch mapping modes</td><td>Simple</td></tr>
<tr><td><a href="#sendmidi">SendMidi</a></td><td>Send MIDI messages</td><td>Moderate</td></tr>
<tr><td><a href="#conditional">Conditional</a></td><td>Context-aware execution</td><td>Advanced</td></tr>
</tbody></table>
</div>
<h2 id="simple-actions"><a class="header" href="#simple-actions">Simple Actions</a></h2>
<h3 id="keystroke"><a class="header" href="#keystroke">Keystroke</a></h3>
<p>Send keyboard shortcuts with modifiers. The most common action type for productivity workflows.</p>
<pre><code class="language-toml"># Single key
[modes.mappings.action]
type = "Keystroke"
keys = "space"

# With modifiers
[modes.mappings.action]
type = "Keystroke"
keys = "c"
modifiers = ["cmd"]  # Cmd+C

# Multiple modifiers
[modes.mappings.action]
type = "Keystroke"
keys = "t"
modifiers = ["cmd", "shift"]  # Cmd+Shift+T
</code></pre>
<p><strong>Available Modifiers</strong>:</p>
<ul>
<li><code>cmd</code> / <code>command</code> / <code>meta</code> - Command key (macOS) / Windows key</li>
<li><code>ctrl</code> / <code>control</code> - Control key</li>
<li><code>alt</code> / <code>option</code> - Alt/Option key</li>
<li><code>shift</code> - Shift key</li>
</ul>
<p><strong>Special Keys</strong>:</p>
<ul>
<li>Navigation: <code>up</code>, <code>down</code>, <code>left</code>, <code>right</code>, <code>home</code>, <code>end</code>, <code>pageup</code>, <code>pagedown</code></li>
<li>Editing: <code>backspace</code>, <code>delete</code>, <code>tab</code>, <code>return</code>, <code>enter</code>, <code>escape</code>, <code>esc</code></li>
<li>Function: <code>f1</code> through <code>f12</code></li>
<li>Other: <code>space</code></li>
</ul>
<h3 id="text"><a class="header" href="#text">Text</a></h3>
<p>Type arbitrary text strings with full Unicode support. Uses keyboard simulation to type character-by-character, making it reliable for Unicode and complex text.</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Text"
text = "Hello, World!"
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Email signatures and contact information</li>
<li>Code snippets and boilerplate</li>
<li>Commonly used phrases and templates</li>
<li>Form auto-fill with saved data</li>
<li>Multi-language text input</li>
<li>Text expansion (abbreviation ‚Üí full text)</li>
</ul>
<p><strong>Advanced Examples</strong>:</p>
<p><strong>Multi-line Code Snippet</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Text"
text = """
fn main() {
    println!(\"Hello, World!\");
}
"""
</code></pre>
<p><strong>Email Signature</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Text"
text = """
Best regards,
John Doe
Senior Developer
john@example.com
"""
</code></pre>
<p><strong>Unicode and Emoji</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Text"
text = "‚úÖ Task completed! üéâ"
</code></pre>
<p><strong>Special Characters</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Text"
text = "!@#$%^&amp;*()_+-=[]{}|;':\",./&lt;&gt;?"
</code></pre>
<p><strong>Slow Typing for Laggy UIs</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Sequence"
actions = [
    { type = "Text", text = "user" },
    { type = "Delay", ms = 100 },
    { type = "Text", text = "name" },
    { type = "Delay", ms = 100 },
    { type = "Text", text = "123" }
]
</code></pre>
<p><strong>TOML String Escaping Tips</strong>:</p>
<ul>
<li>Escape quotes: <code>"He said \"hello\""</code></li>
<li>Multiline strings: <code>"""Line 1\nLine 2"""</code></li>
<li>Literal strings (no escaping): <code>'C:\Users\file.txt'</code></li>
<li>Backslashes: Double them <code>\\</code> or use literal strings</li>
</ul>
<p><strong>Platform Behavior</strong>:</p>
<ul>
<li>Does NOT use clipboard (leaves clipboard unchanged)</li>
<li>Types character-by-character via keyboard simulation</li>
<li>Respects active keyboard layout</li>
<li>Requires text input focus in target app</li>
</ul>
<p><strong>Troubleshooting</strong>:</p>
<ul>
<li>If text doesn't type: Ensure app has input focus</li>
<li>If Unicode fails: Check app supports UTF-8</li>
<li>If too fast: Use Sequence with Delay actions</li>
<li>If wrong characters: Check keyboard layout or escape TOML strings</li>
</ul>
<h3 id="launch"><a class="header" href="#launch">Launch</a></h3>
<p>Open applications by name or path. Simple, cross-platform application launcher.</p>
<p><strong>Basic Usage</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Launch"
app = "Terminal"  # macOS application name
</code></pre>
<p><strong>Full Path</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Launch"
app = "/Applications/Utilities/Terminal.app"
</code></pre>
<p><strong>Script Execution</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Launch"
app = "/Users/username/scripts/backup.sh"  # Must have execute permissions (chmod +x)
</code></pre>
<p><strong>Multiple Apps (Streaming Setup)</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Sequence"
actions = [
    { type = "Launch", app = "OBS" },
    { type = "Delay", ms = 2000 },  # Wait for OBS to load
    { type = "Launch", app = "Discord" },
    { type = "Delay", ms = 1000 },
    { type = "Launch", app = "Spotify" }
]
</code></pre>
<p><strong>Development Environment</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Sequence"
actions = [
    { type = "Launch", app = "Visual Studio Code" },
    { type = "Delay", ms = 1500 },
    { type = "Launch", app = "Terminal" },
    { type = "Delay", ms = 500 },
    { type = "Launch", app = "Safari" }
]
</code></pre>
<p><strong>Platform Behavior</strong>:</p>
<ul>
<li><strong>macOS</strong>: Uses <code>open -a</code> command
<ul>
<li>App names: "Safari", "Visual Studio Code", "Logic Pro"</li>
<li>Full paths: "/Applications/Safari.app"</li>
<li>If running, brings to front (doesn't launch duplicate)</li>
</ul>
</li>
<li><strong>Linux</strong>: Direct executable launch
<ul>
<li>Requires full path or executable in $PATH</li>
<li>Typically launches new instance even if running</li>
</ul>
</li>
<li><strong>Windows</strong>: Uses <code>cmd /C start</code> command
<ul>
<li>Accepts app names or paths</li>
<li>Uses file associations</li>
</ul>
</li>
</ul>
<p><strong>Troubleshooting</strong>:</p>
<ul>
<li>Test manually: <code>open -a "App Name"</code> (macOS) or <code>which app-name</code> (Linux)</li>
<li>Enable debug logging: <code>DEBUG=1 cargo run --release 2</code></li>
<li>Use full paths if app names don't work</li>
<li>Ensure scripts have execute permissions: <code>chmod +x script.sh</code></li>
</ul>
<h3 id="shell"><a class="header" href="#shell">Shell</a></h3>
<p>Execute system commands directly without shell interpreter (secure execution).</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Shell"
command = "git status"
</code></pre>
<p><strong>Security Design</strong>: Commands are executed directly via <code>Command::new(program).args(args)</code> without using shell interpreters (<code>sh</code>, <code>bash</code>, <code>cmd</code>). This prevents command injection attacks while supporting common use cases.</p>
<p><strong>Supported Examples</strong>:</p>
<pre><code class="language-toml"># Simple commands
command = "git status"
command = "ls -la /tmp"

# File operations
command = "open ~/Downloads"

# System info
command = "system_profiler SPUSBDataType"

# AppleScript (macOS)
command = "osascript -e 'set volume 50'"
command = "osascript -e 'display notification \"MIDI triggered!\"'"
</code></pre>
<p><strong>Shell Features NOT Supported</strong> (for security):</p>
<ul>
<li>Command chaining: <code>&amp;&amp;</code>, <code>||</code>, <code>;</code></li>
<li>Piping: <code>|</code></li>
<li>Redirection: <code>&gt;</code>, <code>&lt;</code>, <code>&gt;&gt;</code></li>
<li>Command substitution: <code>$(...)</code>, <code>`...`</code></li>
<li>Variable expansion: <code>$HOME</code>, <code>${VAR}</code></li>
</ul>
<p><strong>Alternative</strong>: Use <code>Sequence</code> action to chain multiple commands:</p>
<pre><code class="language-toml"># Instead of: "git add . &amp;&amp; git commit -m 'save'"
type = "Sequence"
actions = [
    { type = "Shell", command = "git add ." },
    { type = "Shell", command = "git commit -m 'save'" }
]
</code></pre>
<h2 id="timing--flow-control"><a class="header" href="#timing--flow-control">Timing &amp; Flow Control</a></h2>
<h3 id="delay"><a class="header" href="#delay">Delay</a></h3>
<p>Add pauses between actions in sequences.</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Delay"
ms = 500  # 500 milliseconds
</code></pre>
<p><strong>Typical Uses</strong>:</p>
<ul>
<li>Wait for UI to load</li>
<li>Slow down rapid automation</li>
<li>Add deliberate pacing to sequences</li>
</ul>
<h3 id="sequence"><a class="header" href="#sequence">Sequence</a></h3>
<p>Execute multiple actions in order. Automatic 50ms delay between actions.</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Sequence"
actions = [
    { type = "Keystroke", keys = "space", modifiers = ["cmd"] },  # Spotlight
    { type = "Delay", ms = 200 },  # Wait for Spotlight
    { type = "Text", text = "Terminal" },
    { type = "Keystroke", keys = "return" }  # Launch
]
</code></pre>
<p><strong>Design Patterns</strong>:</p>
<p><strong>1. Application Launcher</strong>:</p>
<pre><code class="language-toml">type = "Sequence"
actions = [
    { type = "Keystroke", keys = "space", modifiers = ["cmd"] },
    { type = "Delay", ms = 100 },
    { type = "Text", text = "VS Code" },
    { type = "Keystroke", keys = "return" }
]
</code></pre>
<p><strong>2. File Workflow</strong>:</p>
<pre><code class="language-toml">type = "Sequence"
actions = [
    { type = "Keystroke", keys = "s", modifiers = ["cmd"] },  # Save
    { type = "Delay", ms = 100 },
    { type = "Keystroke", keys = "w", modifiers = ["cmd"] },  # Close
    { type = "Delay", ms = 50 },
    { type = "Keystroke", keys = "down" },  # Next file
    { type = "Keystroke", keys = "return" }  # Open
]
</code></pre>
<p><strong>3. Git Workflow</strong>:</p>
<pre><code class="language-toml">type = "Sequence"
actions = [
    { type = "Shell", command = "git add -A" },
    { type = "Delay", ms = 100 },
    { type = "Shell", command = "git commit -m 'quick save'" },
    { type = "Delay", ms = 100 },
    { type = "Shell", command = "git push" }
]
</code></pre>
<h3 id="repeat"><a class="header" href="#repeat">Repeat</a></h3>
<p>Repeat an action (or sequence) multiple times.</p>
<pre><code class="language-toml"># Simple repeat: scroll down 10 times
[modes.mappings.action]
type = "Repeat"
count = 10
action = { type = "Keystroke", keys = "down" }
</code></pre>
<p><strong>With Delay Between Iterations</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Repeat"
count = 5
delay_ms = 200  # 200ms between each press
action = { type = "Keystroke", keys = "down" }
</code></pre>
<p><strong>Repeat a Sequence</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Repeat"
count = 3
delay_ms = 1000
action = {
    type = "Sequence",
    actions = [
        { type = "Keystroke", keys = "down" },  # Select next item
        { type = "Delay", ms = 100 },
        { type = "Keystroke", keys = "return" },  # Open
        { type = "Delay", ms = 500 },
        { type = "Keystroke", keys = "w", modifiers = ["cmd"] }  # Close
    ]
}
</code></pre>
<p><strong>Error Handling</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Repeat"
count = 3
delay_ms = 2000
action = { type = "Launch", app = "Xcode" }
</code></pre>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>count</code> (required): Number of repetitions (0 = no-op, 1 = run once)</li>
<li><code>action</code> (required): Action to repeat</li>
<li><code>delay_ms</code> (optional): Delay in milliseconds between iterations (not applied after last iteration)</li>
</ul>
<p><strong>Edge Cases</strong>:</p>
<ul>
<li><code>count = 0</code> is valid (no-op)</li>
<li><code>count = 1</code> executes once with no delay</li>
<li>Nested repeats multiply: 10 outer √ó 5 inner = 50 total</li>
<li>Large counts (&gt;1000) may appear as hang</li>
<li>Blocking operation - cannot interrupt</li>
</ul>
<p><strong>Use Cases</strong>:</p>
<ol>
<li><strong>Pagination</strong>: Scroll through long lists</li>
<li><strong>Batch Processing</strong>: Repeat workflow on multiple items</li>
<li><strong>Velocity Mapping</strong>: Different repeat counts for soft/medium/hard presses</li>
<li><strong>Retry Logic</strong>: Try launching app multiple times</li>
</ol>
<h2 id="mouse-actions"><a class="header" href="#mouse-actions">Mouse Actions</a></h2>
<h3 id="mouseclick"><a class="header" href="#mouseclick">MouseClick</a></h3>
<p>Simulate mouse clicks with optional positioning.</p>
<pre><code class="language-toml"># Click at current cursor position
[modes.mappings.action]
type = "MouseClick"
button = "Left"

# Click at specific coordinates
[modes.mappings.action]
type = "MouseClick"
button = "Right"
x = 500
y = 300
</code></pre>
<p><strong>Button Options</strong>: <code>Left</code>, <code>Right</code>, <code>Middle</code></p>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Click UI elements at fixed positions</li>
<li>Context menu automation</li>
<li>Drag-and-drop workflows (with sequences)</li>
</ul>
<h2 id="system-actions"><a class="header" href="#system-actions">System Actions</a></h2>
<h3 id="volumecontrol"><a class="header" href="#volumecontrol">VolumeControl</a></h3>
<p>Control system volume with platform-specific implementations.</p>
<p><strong>Platform Support</strong>:</p>
<ul>
<li><strong>macOS</strong>: AppleScript via <code>osascript</code> (full support)</li>
<li><strong>Linux/Windows</strong>: Not yet implemented</li>
</ul>
<pre><code class="language-toml"># Volume up (increment by 5)
[modes.mappings.action]
type = "VolumeControl"
operation = "Up"

# Volume down (decrement by 5)
[modes.mappings.action]
type = "VolumeControl"
operation = "Down"

# Mute
[modes.mappings.action]
type = "VolumeControl"
operation = "Mute"

# Unmute
[modes.mappings.action]
type = "VolumeControl"
operation = "Unmute"

# Set specific volume (0-100)
[modes.mappings.action]
type = "VolumeControl"
operation = "Set"
value = 50
</code></pre>
<p><strong>Operations</strong>:</p>
<ul>
<li><code>Up</code> - Increase volume by 5%</li>
<li><code>Down</code> - Decrease volume by 5%</li>
<li><code>Mute</code> - Mute audio output</li>
<li><code>Unmute</code> - Unmute audio output</li>
<li><code>Set</code> - Set volume to specific level (0-100), requires <code>value</code> parameter</li>
</ul>
<p><strong>Encoder Volume Control Example</strong>:</p>
<pre><code class="language-toml">[[global_mappings]]
description = "Encoder for volume control"
[global_mappings.trigger]
type = "EncoderTurn"
direction = "Clockwise"
[global_mappings.action]
type = "VolumeControl"
operation = "Up"

[[global_mappings]]
description = "Encoder for volume control"
[global_mappings.trigger]
type = "EncoderTurn"
direction = "CounterClockwise"
[global_mappings.action]
type = "VolumeControl"
operation = "Down"
</code></pre>
<p><strong>Performance</strong>: &lt;100ms response time on macOS</p>
<h3 id="modechange"><a class="header" href="#modechange">ModeChange</a></h3>
<p>Switch between mapping modes programmatically.</p>
<pre><code class="language-toml"># Switch to specific mode by name
[modes.mappings.action]
type = "ModeChange"
mode = "Media"
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li><strong>Context Switching</strong>: Switch to different mapping sets</li>
<li><strong>Workflow Modes</strong>: Development, Media, Gaming modes</li>
<li><strong>Scene Control</strong>: Different modes for streaming scenes</li>
</ul>
<p><strong>Example - Mode Switcher Pad</strong>:</p>
<pre><code class="language-toml">[[modes.mappings]]
description = "Switch to Media mode"
[modes.mappings.trigger]
type = "Note"
note = 15
[modes.mappings.action]
type = "ModeChange"
mode = "Media"
</code></pre>
<p><strong>Note</strong>: Mode changes trigger LED color updates and mapping context switches. The mode name must match a defined mode in your configuration.</p>
<h2 id="midi-output-actions"><a class="header" href="#midi-output-actions">MIDI Output Actions</a></h2>
<h3 id="sendmidi"><a class="header" href="#sendmidi">SendMidi</a></h3>
<p>Send MIDI messages to physical or virtual MIDI output ports. Enables DAW control, external synth control, and MIDI routing.</p>
<p><strong>Platform Support</strong>: macOS, Linux, Windows (all platforms with MIDI output)</p>
<pre><code class="language-toml"># Send MIDI Note On
[modes.mappings.action]
type = "SendMidi"
port = "IAC Driver Bus 1"  # Virtual MIDI port name
message_type = "NoteOn"
channel = 0        # MIDI channel 0-15 (maps to channel 1-16)
note = 60          # Middle C (0-127)
velocity = 100     # Note velocity (0-127)
</code></pre>
<p><strong>Message Types</strong>:</p>
<p><strong>NoteOn</strong> - Note on with velocity:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "SendMidi"
port = "Virtual MIDI Port"
message_type = "NoteOn"
channel = 0    # MIDI channel 0-15
note = 60      # Note number (0-127)
velocity = 100 # Velocity (0-127)
</code></pre>
<p><strong>NoteOff</strong> - Note off:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "SendMidi"
port = "Virtual MIDI Port"
message_type = "NoteOff"
channel = 0
note = 60
velocity = 0  # Release velocity (usually 0)
</code></pre>
<p><strong>CC (Control Change)</strong> - MIDI control change:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "SendMidi"
port = "Virtual MIDI Port"
message_type = "CC"
channel = 0
controller = 7  # Controller number (0-127, e.g., 7=Volume, 1=Modulation)
value = 100     # Controller value (0-127)
</code></pre>
<p><strong>ProgramChange</strong> - Change program/preset:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "SendMidi"
port = "Virtual MIDI Port"
message_type = "ProgramChange"
channel = 0
program = 9  # Program number (0-127)
</code></pre>
<p><strong>PitchBend</strong> - Pitch bend wheel:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "SendMidi"
port = "Virtual MIDI Port"
message_type = "PitchBend"
channel = 0
value = 0  # Pitch bend value (-8192 to +8191, 0 = center)
</code></pre>
<p><strong>Aftertouch</strong> - Channel pressure:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "SendMidi"
port = "Virtual MIDI Port"
message_type = "Aftertouch"
channel = 0
pressure = 64  # Pressure value (0-127)
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li><strong>DAW Control</strong>: Send notes/CC to control Logic Pro, Ableton Live, FL Studio</li>
<li><strong>Virtual Instruments</strong>: Trigger software synths and samplers</li>
<li><strong>MIDI Routing</strong>: Route controller input to different destinations</li>
<li><strong>Hardware Synths</strong>: Control external synthesizers and drum machines</li>
<li><strong>Lighting Control</strong>: Send MIDI to DMX/lighting systems</li>
</ul>
<p><strong>Example - Velocity-Sensitive MIDI</strong>:</p>
<pre><code class="language-toml">[[modes.mappings]]
description = "Expressive MIDI note with velocity curve"

[modes.mappings.trigger]
type = "Note"
note = 1

[modes.mappings.velocity_mapping]
type = "Curve"
curve_type = "Exponential"
intensity = 0.7  # Boost soft hits

[modes.mappings.action]
type = "SendMidi"
port = "IAC Driver Bus 1"
message_type = "NoteOn"
channel = 0
note = 60
# Velocity is derived from velocity_mapping transformation
</code></pre>
<p><strong>Example - Control DAW Volume</strong>:</p>
<pre><code class="language-toml">[[modes.mappings]]
description = "Control track volume with CC"

[modes.mappings.trigger]
type = "Note"
note = 5

[modes.mappings.action]
type = "SendMidi"
port = "IAC Driver Bus 1"
message_type = "CC"
channel = 0
controller = 7   # Volume CC
value = 100
</code></pre>
<p><strong>Example - Note On/Off Sequence</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Sequence"
actions = [
  { type = "SendMidi", port = "IAC", message_type = "NoteOn", channel = 0, note = 60, velocity = 100 },
  { type = "Delay", ms = 500 },
  { type = "SendMidi", port = "IAC", message_type = "NoteOff", channel = 0, note = 60, velocity = 0 }
]
</code></pre>
<p><strong>Virtual MIDI Ports</strong>:</p>
<ul>
<li><strong>macOS</strong>: Use IAC Driver (Audio MIDI Setup ‚Üí Window ‚Üí Show MIDI Studio ‚Üí IAC Driver)</li>
<li><strong>Windows</strong>: Use loopMIDI or similar virtual MIDI port software</li>
<li><strong>Linux</strong>: Use ALSA virtual ports</li>
</ul>
<p><strong>Note</strong>: Virtual MIDI port creation is not yet automated. Use system tools to create virtual ports, then reference them by name in the <code>port</code> parameter.</p>
<h2 id="advanced-actions"><a class="header" href="#advanced-actions">Advanced Actions</a></h2>
<h3 id="conditional"><a class="header" href="#conditional">Conditional</a></h3>
<p>Execute different actions based on runtime conditions such as time, active app, current mode, or day of week. Enables context-aware, adaptive behavior.</p>
<p><strong>Complete Documentation</strong>: See <a href="conditionals.html">Configuration: Conditionals</a> for comprehensive reference.</p>
<p><strong>Basic Structure</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Conditional"
condition = { /* condition definition */ }
then_action = { /* action if true */ }
else_action = { /* optional action if false */ }
</code></pre>
<p><strong>Quick Examples</strong>:</p>
<p><strong>Time-Based Launcher</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Conditional"

[modes.mappings.action.condition]
type = "TimeRange"
start = "09:00"
end = "17:00"

[modes.mappings.action.then_action]
type = "Launch"
app = "Slack"  # Work hours

[modes.mappings.action.else_action]
type = "Launch"
app = "Discord"  # Off hours
</code></pre>
<p><strong>App-Aware Control</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Conditional"

[modes.mappings.action.condition]
type = "AppRunning"
app_name = "Logic Pro"

[modes.mappings.action.then_action]
type = "SendMidi"
port = "IAC Driver Bus 1"
message_type = "NoteOn"
channel = 0
note = 60
velocity = 100

[modes.mappings.action.else_action]
type = "Launch"
app = "Logic Pro"
</code></pre>
<p><strong>Multiple Conditions (AND)</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Conditional"

[modes.mappings.action.condition]
type = "And"
conditions = [
  { type = "TimeRange", start = "09:00", end = "17:00" },
  { type = "DayOfWeek", days = [1, 2, 3, 4, 5] },
  { type = "AppRunning", app_name = "Slack" }
]

[modes.mappings.action.then_action]
type = "Keystroke"
keys = "s"
modifiers = ["cmd", "shift"]
</code></pre>
<p><strong>Multiple Conditions (OR)</strong>:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Conditional"

[modes.mappings.action.condition]
type = "Or"
conditions = [
  { type = "AppFrontmost", app_name = "Safari" },
  { type = "AppFrontmost", app_name = "Chrome" },
  { type = "AppFrontmost", app_name = "Firefox" }
]

[modes.mappings.action.then_action]
type = "Keystroke"
keys = "t"
modifiers = ["cmd"]  # New tab in any browser
</code></pre>
<p><strong>Available Condition Types</strong>:</p>
<ul>
<li><code>Always</code> - Always true</li>
<li><code>Never</code> - Always false</li>
<li><code>TimeRange</code> - Time window (HH:MM format)</li>
<li><code>DayOfWeek</code> - Specific days (1=Monday through 7=Sunday)</li>
<li><code>AppRunning</code> - Process detection (macOS, Linux)</li>
<li><code>AppFrontmost</code> - Active window detection (macOS only)</li>
<li><code>ModeIs</code> - Current mode matching</li>
<li><code>And</code> - Logical AND of multiple conditions</li>
<li><code>Or</code> - Logical OR of multiple conditions</li>
<li><code>Not</code> - Logical negation</li>
</ul>
<p><strong>See Also</strong>:</p>
<ul>
<li><a href="conditionals.html">Configuration: Conditionals</a> - Complete TOML reference</li>
<li><a href="../guides/context-aware.html">Guide: Context-Aware Mappings</a> - User guide with examples</li>
<li><a href="../tutorials/dynamic-workflows.html">Tutorial: Dynamic Workflows</a> - Step-by-step tutorial</li>
</ul>
<h2 id="action-composition-patterns"><a class="header" href="#action-composition-patterns">Action Composition Patterns</a></h2>
<h3 id="1-velocity-based-repeat-count"><a class="header" href="#1-velocity-based-repeat-count">1. Velocity-Based Repeat Count</a></h3>
<p>Different repeat counts based on how hard you hit the pad:</p>
<pre><code class="language-toml">[modes.mappings.trigger]
type = "VelocityRange"
note = 10
ranges = [
    # Soft: repeat 3 times
    { min = 0, max = 40, action = {
        type = "Repeat",
        count = 3,
        action = { type = "Keystroke", keys = "down" }
    }},
    # Medium: repeat 5 times
    { min = 41, max = 80, action = {
        type = "Repeat",
        count = 5,
        action = { type = "Keystroke", keys = "down" }
    }},
    # Hard: repeat 10 times
    { min = 81, max = 127, action = {
        type = "Repeat",
        count = 10,
        action = { type = "Keystroke", keys = "down" }
    }}
]
</code></pre>
<h3 id="2-nested-repeats"><a class="header" href="#2-nested-repeats">2. Nested Repeats</a></h3>
<p>Multiply effect (use with caution!):</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Repeat"
count = 3  # Outer loop
action = {
    type = "Repeat",
    count = 5,  # Inner loop ‚Üí 3 √ó 5 = 15 total
    action = { type = "Keystroke", keys = "down" }
}
</code></pre>
<h3 id="3-complex-automation-workflow"><a class="header" href="#3-complex-automation-workflow">3. Complex Automation Workflow</a></h3>
<p>Combine sequences, repeats, and delays:</p>
<pre><code class="language-toml">[modes.mappings.action]
type = "Sequence"
actions = [
    # Open file browser
    { type = "Keystroke", keys = "o", modifiers = ["cmd"] },
    { type = "Delay", ms = 500 },

    # Navigate to folder
    { type = "Keystroke", keys = "g", modifiers = ["cmd", "shift"] },
    { type = "Delay", ms = 200 },
    { type = "Text", text = "~/Downloads" },
    { type = "Keystroke", keys = "return" },
    { type = "Delay", ms = 500 },

    # Process first 3 files
    { type = "Repeat", count = 3, delay_between_ms = 1000, action = {
        type = "Sequence",
        actions = [
            { type = "Keystroke", keys = "return" },  # Open file
            { type = "Delay", ms = 800 },
            { type = "Keystroke", keys = "e", modifiers = ["cmd"] },  # Export
            { type = "Delay", ms = 500 },
            { type = "Keystroke", keys = "return" },  # Confirm
            { type = "Delay", ms = 1000 },
            { type = "Keystroke", keys = "w", modifiers = ["cmd"] },  # Close
            { type = "Delay", ms = 200 },
            { type = "Keystroke", keys = "down" }  # Next file
        ]
    }}
]
</code></pre>
<h2 id="performance--best-practices"><a class="header" href="#performance--best-practices">Performance &amp; Best Practices</a></h2>
<h3 id="timing-guidelines"><a class="header" href="#timing-guidelines">Timing Guidelines</a></h3>
<ul>
<li><strong>Keystroke</strong>: Instant (&lt;1ms)</li>
<li><strong>Text</strong>: ~10ms per character</li>
<li><strong>Launch</strong>: 100-2000ms (app dependent)</li>
<li><strong>Shell</strong>: Variable (command dependent)</li>
<li><strong>Sequence</strong>: 50ms auto-delay between actions</li>
<li><strong>Delay</strong>: As specified</li>
<li><strong>MouseClick</strong>: &lt;5ms</li>
<li><strong>Repeat</strong>: count √ó (action time + delay_between_ms)</li>
</ul>
<h3 id="optimization-tips"><a class="header" href="#optimization-tips">Optimization Tips</a></h3>
<ol>
<li><strong>Minimize Delays</strong>: Only add delays where needed (UI loading, animations)</li>
<li><strong>Batch Operations</strong>: Use Sequence instead of multiple mappings</li>
<li><strong>Avoid High-Frequency Repeats</strong>: Add <code>delay_between_ms</code> for rapid repeats</li>
<li><strong>Test Incrementally</strong>: Start with count=1, then increase</li>
<li><strong>Consider User Experience</strong>: Long-running actions should have feedback</li>
</ol>
<h3 id="common-pitfalls"><a class="header" href="#common-pitfalls">Common Pitfalls</a></h3>
<ol>
<li><strong>Blocking Operations</strong>: Repeats and sequences block - cannot interrupt</li>
<li><strong>Timing Fragility</strong>: UI timing varies by system load</li>
<li><strong>Nested Explosions</strong>: 10 √ó 10 nested repeat = 100 executions</li>
<li><strong>Error Swallowing</strong>: <code>stop_on_error = false</code> continues silently</li>
</ol>
<h3 id="debugging-actions"><a class="header" href="#debugging-actions">Debugging Actions</a></h3>
<p>Enable debug mode to see action execution:</p>
<pre><code class="language-bash">DEBUG=1 cargo run --release 2
</code></pre>
<p>Watch for:</p>
<ul>
<li>Action start/completion logs</li>
<li>Timing between actions</li>
<li>Error messages</li>
<li>Repeat iteration counts</li>
</ul>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="../reference/action-types.html">Action Types Reference</a> - Complete technical specifications</li>
<li><a href="examples.html">Configuration Examples</a> - Real-world configuration patterns</li>
<li><a href="../reference/trigger-types.html">Trigger Types</a> - Trigger configuration reference</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../configuration/triggers.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../configuration/curves.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../configuration/triggers.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../configuration/curves.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
